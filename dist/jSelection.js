!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.jSelection=t():e.jSelection=t()}(global,(function(){return function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=0)}([function(e,t,r){"use strict";r.r(t);function getNodeTextLength(e){if(e.textContent){let{length:t}=e.textContent;return e.innerHTML&&(t+=(e.innerHTML.match(/<br/g)||[]).length),t}return 0}function calcBeforeNodeTextOffset(e,t){if(!t.contains(e))return-Infinity;if(e===t)return 0;let r=0;return[...t.childNodes].some(t=>t.contains(e)?(r+=calcBeforeNodeTextOffset(e,t),!0):(r+=getNodeTextLength(t),!1)),r}function getNodeFromTextOffset(e,t){let r=null,n=e;const o=getNodeTextLength(t);if(e>o){for(r=t;r.lastChild;)r=r.lastChild;n=getNodeTextLength(r)}else if(e<1){for(r=t;r.firstChild;)r=r.firstChild;n=0}else if(t.nodeType===Node.TEXT_NODE)r=t,n=Math.min(o,e);else{[...t.childNodes].some(e=>{const t=getNodeTextLength(e);if(n>t)return n-=t,!1;const{node:o,offset:i}=getNodeFromTextOffset(n,e);return r=o,n=i,!0})}return{node:r,offset:Math.floor(n)}}t["default"]=class{constructor(e){var t,r,n;if(n=void 0,(r="target")in(t=this)?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,!(e instanceof HTMLElement))throw new Error("target is not a HTMLElement!");this.target=e}get string(){return this.getSelection.toString()}getSelection(){return window.getSelection()}getCurrentRange(e=this.getSelection()){if(e){const{rangeCount:t}=e;if(t>0)return e.getRangeAt(t-1)}return null}resetRange(e=null){const t=this.getSelection();e&&t&&(t.removeAllRanges(),t.addRange(e))}setCursorRangePosition({startContainer:e=this.target,startOffset:t=0,endContainer:r=this.target,endOffset:n=0}){if(e&&r){const o=document.createRange();o.setStart(e,t),o.setEnd(r,n),this.resetRange(o)}}getCursorOffsetTextPosition(e=this.target,t=this.getCurrentRange()){if(!(e instanceof HTMLElement))throw new Error("target is not a HTMLElement!");if(!t)return{start:-Infinity,end:-Infinity};const{startContainer:r,startOffset:n,endContainer:o,endOffset:i}=t,s=getNodeTextLength(r)===n?0:.5,f=getNodeTextLength(o)===i?0:.5;return{start:calcBeforeNodeTextOffset(r,e)+n+s,end:calcBeforeNodeTextOffset(o,e)+i+f}}getSelectionDataFromCursorOffsetTextPostion({start:e=0,end:t=0},r=this.target){if(!(r instanceof HTMLElement))throw new Error("target is not a Dom Element!");const{node:n,offset:o}=getNodeFromTextOffset(+e,r),{node:i,offset:s}=getNodeFromTextOffset(+t,r);return{startContainer:n,startOffset:o,endContainer:i,endOffset:s}}setCursorOffsetTextPostion({start:e=0,end:t=0},r=this.target){if(!(r instanceof HTMLElement))throw new Error("target is not a Dom Element!");const n=this.getSelectionDataFromCursorOffsetTextPostion({start:e,end:t},r);this.setCursorRangePosition(n)}setCursorToEnd(){const{lastChild:e}=this.target;if(e){const t=document.createRange();t.setStartAfter(e),t.setEndAfter(e),this.resetRange(t)}}}}])["default"]}));